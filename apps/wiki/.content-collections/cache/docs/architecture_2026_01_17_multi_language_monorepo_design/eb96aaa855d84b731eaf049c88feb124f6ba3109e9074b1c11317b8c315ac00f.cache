"var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var y=(r,n)=>()=>(n||r((n={exports:{}}).exports,n),n.exports),f=(r,n)=>{for(var i in n)c(r,i,{get:n[i],enumerable:!0})},d=(r,n,i,o)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let l of m(n))!k.call(r,l)&&l!==i&&c(r,l,{get:()=>n[l],enumerable:!(o=g(n,l))||o.enumerable});return r};var v=(r,n,i)=>(i=r!=null?p(u(r)):{},d(n||!r||!r.__esModule?c(i,\"default\",{value:r,enumerable:!0}):i,r)),b=r=>d(c({},\"__esModule\",{value:!0}),r);var a=y((x,t)=>{t.exports=_jsx_runtime});var P={};f(P,{default:()=>h});var e=v(a());function s(r){let n={code:\"code\",h1:\"h1\",h2:\"h2\",h3:\"h3\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",strong:\"strong\",ul:\"ul\",...r.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.h1,{children:\"Multi-Language Monorepo Architecture Design\"}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Date:\"}),` 2026-01-17\n`,(0,e.jsx)(n.strong,{children:\"Author:\"}),` Vincent Xu\n`,(0,e.jsx)(n.strong,{children:\"Status:\"}),\" Approved\"]}),`\n`,(0,e.jsx)(n.h2,{children:\"Overview\"}),`\n`,(0,e.jsx)(n.p,{children:\"Transform Vibe Trading from a TypeScript-only monorepo into a multi-language monorepo supporting both TypeScript (React frontend + Node.js API) and Python (FastAPI microservices), with event-driven architecture using Apache Kafka.\"}),`\n`,(0,e.jsx)(n.h2,{children:\"Goals\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"Support both TypeScript and Python in Nx monorepo\"}),`\n`,(0,e.jsx)(n.li,{children:\"Implement microservices architecture with event-driven communication\"}),`\n`,(0,e.jsx)(n.li,{children:\"Enable Docker deployment with multiple images\"}),`\n`,(0,e.jsx)(n.li,{children:\"Provide comprehensive observability for all services\"}),`\n`,(0,e.jsx)(n.li,{children:\"Maintain development experience and build performance\"}),`\n`]}),`\n`,(0,e.jsx)(n.h2,{children:\"Architecture Overview\"}),`\n`,(0,e.jsx)(n.h3,{children:\"Technology Stack\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Frontend\"}),\": React 19 + TypeScript + Vite\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"API Gateway\"}),\": Node.js + Express + TypeScript\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Python Services\"}),\": FastAPI + Poetry\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Message Broker\"}),\": Apache Kafka (with Zookeeper)\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Cache\"}),\": Redis\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Monorepo\"}),\": Nx 22.3.3\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Containerization\"}),\": Docker + Docker Compose\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Observability\"}),\": Portainer + Kafka UI + Redis Commander + Prometheus + Grafana + Loki\"]}),`\n`]}),`\n`,(0,e.jsx)(n.h2,{children:\"Monorepo Structure\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{children:`vibe-trading/\n\\u251C\\u2500\\u2500 apps/\n\\u2502   \\u251C\\u2500\\u2500 web/                          # React frontend (existing, moved)\n\\u2502   \\u251C\\u2500\\u2500 api/                          # TypeScript API Gateway (existing, moved)\n\\u2502   \\u251C\\u2500\\u2500 trading-engine/               # Python FastAPI - Trading algorithms\n\\u2502   \\u251C\\u2500\\u2500 market-data/                  # Python FastAPI - Market data processing\n\\u2502   \\u251C\\u2500\\u2500 analytics/                    # Python FastAPI - Data analytics\n\\u2502   \\u2514\\u2500\\u2500 ml-models/                    # Python FastAPI - ML predictions\n\\u251C\\u2500\\u2500 libs/\n\\u2502   \\u251C\\u2500\\u2500 shared-types/                 # Shared TypeScript types\n\\u2502   \\u2514\\u2500\\u2500 shared-python/                # Shared Python utilities\n\\u251C\\u2500\\u2500 tools/\n\\u2502   \\u2514\\u2500\\u2500 scripts/                      # Build and deployment scripts\n\\u2502       \\u251C\\u2500\\u2500 build-all.sh\n\\u2502       \\u251C\\u2500\\u2500 push-images.sh\n\\u2502       \\u251C\\u2500\\u2500 deploy.sh\n\\u2502       \\u2514\\u2500\\u2500 dev.sh\n\\u251C\\u2500\\u2500 docker/\n\\u2502   \\u251C\\u2500\\u2500 web.Dockerfile\n\\u2502   \\u251C\\u2500\\u2500 api.Dockerfile\n\\u2502   \\u251C\\u2500\\u2500 trading-engine.Dockerfile\n\\u2502   \\u251C\\u2500\\u2500 market-data.Dockerfile\n\\u2502   \\u251C\\u2500\\u2500 analytics.Dockerfile\n\\u2502   \\u251C\\u2500\\u2500 ml-models.Dockerfile\n\\u2502   \\u251C\\u2500\\u2500 nginx.conf\n\\u2502   \\u251C\\u2500\\u2500 prometheus.yml\n\\u2502   \\u2514\\u2500\\u2500 promtail-config.yml\n\\u251C\\u2500\\u2500 docker-compose.yml                # Development environment\n\\u251C\\u2500\\u2500 docker-compose.prod.yml           # Production environment\n\\u251C\\u2500\\u2500 nx.json\n\\u251C\\u2500\\u2500 package.json                      # TypeScript dependencies\n\\u2514\\u2500\\u2500 pyproject.toml                    # Python dependencies (optional root)\n`})}),`\n`,(0,e.jsx)(n.h2,{children:\"Port Allocation (82xx Range)\"}),`\n`,(0,e.jsx)(n.h3,{children:\"Application Services\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"8200\"}),\" - Frontend (web)\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"8201\"}),\" - API Gateway (TypeScript)\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"8202\"}),\" - Trading Engine (Python)\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"8203\"}),\" - Market Data (Python)\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"8204\"}),\" - Analytics (Python)\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"8205\"}),\" - ML Models (Python)\"]}),`\n`]}),`\n`,(0,e.jsx)(n.h3,{children:\"Infrastructure\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"8206\"}),\" - Redis\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"8207\"}),\" - Kafka (internal)\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"8208\"}),\" - Kafka (external)\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"8209\"}),\" - Zookeeper\"]}),`\n`]}),`\n`,(0,e.jsx)(n.h3,{children:\"Observability\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"8210\"}),\" - Portainer (container management)\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"8211\"}),\" - Kafka UI (message monitoring)\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"8212\"}),\" - Redis Commander (cache viewer)\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"8213\"}),\" - Prometheus (metrics)\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"8214\"}),\" - Grafana (visualization)\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"8215\"}),\" - Loki (logs)\"]}),`\n`]}),`\n`,(0,e.jsx)(n.h2,{children:\"Nx Configuration for Python\"}),`\n`,(0,e.jsx)(n.p,{children:\"Since Nx doesn't natively support Python, we use custom executors:\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-json\",children:`{\n  \"name\": \"trading-engine\",\n  \"sourceRoot\": \"apps/trading-engine/src\",\n  \"projectType\": \"application\",\n  \"targets\": {\n    \"install\": {\n      \"executor\": \"nx:run-commands\",\n      \"options\": {\n        \"command\": \"poetry install\",\n        \"cwd\": \"apps/trading-engine\"\n      }\n    },\n    \"serve\": {\n      \"executor\": \"nx:run-commands\",\n      \"options\": {\n        \"command\": \"poetry run uvicorn src.main:app --reload --port 8202\",\n        \"cwd\": \"apps/trading-engine\"\n      }\n    },\n    \"test\": {\n      \"executor\": \"nx:run-commands\",\n      \"options\": {\n        \"command\": \"poetry run pytest\",\n        \"cwd\": \"apps/trading-engine\"\n      }\n    },\n    \"lint\": {\n      \"executor\": \"nx:run-commands\",\n      \"options\": {\n        \"command\": \"poetry run ruff check src/\",\n        \"cwd\": \"apps/trading-engine\"\n      }\n    },\n    \"docker-build\": {\n      \"executor\": \"nx:run-commands\",\n      \"options\": {\n        \"command\": \"docker build -f docker/trading-engine.Dockerfile -t crpi-8qkmcs5mqpg6052i.cn-shanghai.personal.cr.aliyuncs.com/qoeop/vibe-trading-trading-engine:latest .\"\n      }\n    }\n  }\n}\n`})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Each Python service uses Poetry for dependency management with its own \",(0,e.jsx)(n.code,{children:\"pyproject.toml\"}),\".\"]}),`\n`,(0,e.jsx)(n.h2,{children:\"Docker Strategy\"}),`\n`,(0,e.jsxs)(n.h3,{children:[\"Development Environment (\",(0,e.jsx)(n.code,{children:\"docker-compose.yml\"}),\")\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"Includes Kafka, Zookeeper, Redis locally\"}),`\n`,(0,e.jsx)(n.li,{children:\"All services build from source\"}),`\n`,(0,e.jsx)(n.li,{children:\"Hot reload enabled for development\"}),`\n`,(0,e.jsx)(n.li,{children:\"Observability tools (Portainer, Kafka UI, Redis Commander)\"}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{children:[\"Production Environment (\",(0,e.jsx)(n.code,{children:\"docker-compose.prod.yml\"}),\")\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"Hybrid Kafka Strategy:\"})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"Uses external Kafka if \",(0,e.jsx)(n.code,{children:\"KAFKA_BROKERS\"}),\" env var is set\"]}),`\n`,(0,e.jsx)(n.li,{children:\"Falls back to local Kafka if env var is missing\"}),`\n`,(0,e.jsxs)(n.li,{children:[\"Kafka/Zookeeper use Docker profiles (\",(0,e.jsx)(n.code,{children:\"--profile local-kafka\"}),\")\"]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"Image Naming Convention:\"})}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{children:`crpi-8qkmcs5mqpg6052i.cn-shanghai.personal.cr.aliyuncs.com/qoeop/vibe-trading-<service>:latest\n`})}),`\n`,(0,e.jsx)(n.p,{children:\"Services:\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"vibe-trading-web\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"vibe-trading-api\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"vibe-trading-trading-engine\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"vibe-trading-market-data\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"vibe-trading-analytics\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"vibe-trading-ml-models\"})}),`\n`]}),`\n`,(0,e.jsx)(n.h3,{children:\"Deployment Script Logic\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-bash\",children:`if [ -z \"$KAFKA_BROKERS\" ]; then\n  # No external Kafka, use local\n  docker-compose -f docker-compose.prod.yml --profile local-kafka up -d\nelse\n  # Use external Kafka\n  docker-compose -f docker-compose.prod.yml up -d\nfi\n`})}),`\n`,(0,e.jsx)(n.h2,{children:\"Event-Driven Architecture (Kafka)\"}),`\n`,(0,e.jsx)(n.h3,{children:\"Kafka Topics\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{children:`# Market Data Streams\nmarket.data.ticks          # Real-time tick data\nmarket.data.klines         # Candlestick data\nmarket.data.orderbook      # Order book updates\n\n# Trading Events\ntrading.orders.create      # Order creation\ntrading.orders.update      # Order status updates\ntrading.orders.filled      # Order fills\ntrading.positions.update   # Position updates\n\n# Analytics Events\nanalytics.indicators       # Technical indicator results\nanalytics.signals          # Trading signals\nanalytics.reports          # Analysis reports\n\n# ML Events\nml.predictions            # ML model predictions\nml.training.complete      # Model training completion\n`})}),`\n`,(0,e.jsx)(n.h3,{children:\"Communication Flow\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{children:`1. Market Data Service \\u2192 Kafka (market.data.*)\n   \\u251C\\u2192 Trading Engine subscribes \\u2192 Execute strategies\n   \\u251C\\u2192 Analytics subscribes \\u2192 Calculate indicators\n   \\u2514\\u2192 ML Models subscribes \\u2192 Generate predictions\n\n2. Trading Engine \\u2192 Kafka (trading.*)\n   \\u251C\\u2192 API Gateway subscribes \\u2192 Notify frontend\n   \\u2514\\u2192 Analytics subscribes \\u2192 Performance analysis\n\n3. Frontend \\u2190 WebSocket \\u2190 API Gateway \\u2190 Kafka\n   (Real-time updates to frontend)\n`})}),`\n`,(0,e.jsx)(n.h3,{children:\"Python FastAPI + Kafka Example\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-python\",children:`from fastapi import FastAPI\nfrom aiokafka import AIOKafkaConsumer, AIOKafkaProducer\nimport asyncio\n\napp = FastAPI()\n\nKAFKA_BROKERS = os.getenv(\"KAFKA_BROKERS\", \"localhost:8207\")\n\n@app.on_event(\"startup\")\nasync def startup_event():\n    global producer, consumer\n\n    producer = AIOKafkaProducer(bootstrap_servers=KAFKA_BROKERS)\n    await producer.start()\n\n    consumer = AIOKafkaConsumer(\n        'market.data.ticks',\n        bootstrap_servers=KAFKA_BROKERS,\n        group_id='trading-engine'\n    )\n    await consumer.start()\n\n    asyncio.create_task(consume_market_data())\n\n@app.get(\"/health\")\nasync def health_check():\n    return {\"status\": \"healthy\"}\n`})}),`\n`,(0,e.jsx)(n.h2,{children:\"Shared Libraries\"}),`\n`,(0,e.jsxs)(n.h3,{children:[\"TypeScript Shared Types (\",(0,e.jsx)(n.code,{children:\"libs/shared-types/\"}),\")\"]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-typescript\",children:`export interface MarketTickEvent {\n  symbol: string;\n  price: number;\n  volume: number;\n  timestamp: number;\n}\n\nexport interface OrderEvent {\n  orderId: string;\n  symbol: string;\n  side: 'buy' | 'sell';\n  price: number;\n  quantity: number;\n  status: 'pending' | 'filled' | 'cancelled';\n}\n`})}),`\n`,(0,e.jsxs)(n.h3,{children:[\"Python Shared Utilities (\",(0,e.jsx)(n.code,{children:\"libs/shared-python/\"}),\")\"]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-python\",children:`# vibetrading/kafka_utils.py\ndef get_kafka_brokers() -> str:\n    return os.getenv(\"KAFKA_BROKERS\", \"localhost:8207\")\n\n# vibetrading/logger.py\ndef setup_logger(service_name: str):\n    logging.basicConfig(\n        level=logging.INFO,\n        format=f'[{service_name}] %(asctime)s - %(levelname)s - %(message)s'\n    )\n    return logging.getLogger(service_name)\n`})}),`\n`,(0,e.jsx)(n.h2,{children:\"Favicon Configuration\"}),`\n`,(0,e.jsx)(n.p,{children:\"Custom SVG logo in browser tab:\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"File\"}),\": \",(0,e.jsx)(n.code,{children:\"apps/web/public/favicon.svg\"})]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Colors\"}),\":\",`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"Outer frame: \",(0,e.jsx)(n.code,{children:\"#6e3ff3\"}),\" (Violet - brand primary)\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"White elements: \",(0,e.jsx)(n.code,{children:\"#fff\"})]}),`\n`,(0,e.jsxs)(n.li,{children:[\"Red accent: \",(0,e.jsx)(n.code,{children:\"#b72025\"}),\" (\",(0,e.jsx)(n.code,{children:\".st0\"}),\" class)\"]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"HTML\"}),\": \",(0,e.jsx)(n.code,{children:'<link rel=\"icon\" type=\"image/svg+xml\" href=\"/favicon.svg\" />'})]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Nginx\"}),\": Proper MIME types and caching configured\"]}),`\n`]}),`\n`,(0,e.jsx)(n.h2,{children:\"Build and Deployment Scripts\"}),`\n`,(0,e.jsxs)(n.h3,{children:[\"Build All (\",(0,e.jsx)(n.code,{children:\"tools/scripts/build-all.sh\"}),\")\"]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-bash\",children:`# Build frontend and API\nnpx nx build web --configuration=production\nnpx nx build api --configuration=production\n\n# Build all Docker images\ndocker build -f docker/web.Dockerfile -t <registry>/vibe-trading-web:latest .\ndocker build -f docker/api.Dockerfile -t <registry>/vibe-trading-api:latest .\nfor service in trading-engine market-data analytics ml-models; do\n  docker build -f docker/$service.Dockerfile -t <registry>/vibe-trading-$service:latest .\ndone\n`})}),`\n`,(0,e.jsxs)(n.h3,{children:[\"Push Images (\",(0,e.jsx)(n.code,{children:\"tools/scripts/push-images.sh\"}),\")\"]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-bash\",children:`for image in web api trading-engine market-data analytics ml-models; do\n  docker push <registry>/vibe-trading-$image:latest\ndone\n`})}),`\n`,(0,e.jsxs)(n.h3,{children:[\"Deploy (\",(0,e.jsx)(n.code,{children:\"tools/scripts/deploy.sh\"}),\")\"]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-bash\",children:`if [ -z \"$KAFKA_BROKERS\" ]; then\n  docker-compose -f docker-compose.prod.yml --profile local-kafka up -d\nelse\n  docker-compose -f docker-compose.prod.yml up -d\nfi\n`})}),`\n`,(0,e.jsxs)(n.h3,{children:[\"Development (\",(0,e.jsx)(n.code,{children:\"tools/scripts/dev.sh\"}),\")\"]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-bash\",children:`# Start infrastructure\ndocker-compose up -d kafka redis\n\n# Start services\nnpx nx serve web --port=8200 &\nnpx nx serve api &\ncd apps/trading-engine && poetry run uvicorn src.main:app --reload --port 8202 &\n`})}),`\n`,(0,e.jsx)(n.h2,{children:\"Observability Strategy (Progressive)\"}),`\n`,(0,e.jsx)(n.h3,{children:\"Phase 1: Basic Monitoring (Immediate)\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Portainer\"}),\": Container management and logs\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Kafka UI\"}),\": Message flow visualization\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Redis Commander\"}),\": Cache inspection\"]}),`\n`]}),`\n`,(0,e.jsx)(n.h3,{children:\"Phase 2: Metrics Collection (After Stabilization)\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Prometheus\"}),\": Metrics scraping\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Grafana\"}),\": Dashboards and visualization\"]}),`\n`]}),`\n`,(0,e.jsx)(n.h3,{children:\"Phase 3: Log Aggregation (Complete Solution)\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Loki\"}),\": Log aggregation\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Promtail\"}),\": Log collection from containers\"]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"All observability tools are optional and can be added progressively.\"}),`\n`,(0,e.jsx)(n.h2,{children:\"Environment Variables\"}),`\n`,(0,e.jsx)(n.h3,{children:(0,e.jsx)(n.code,{children:\".env.example\"})}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-bash\",children:`# Kafka\nKAFKA_BROKERS=kafka:9092  # or external cluster\n\n# Redis\nREDIS_URL=redis://redis:6379\n\n# API\nNODE_ENV=development\nAPI_PORT=8201\n\n# Python Services\nTRADING_ENGINE_PORT=8202\nMARKET_DATA_PORT=8203\nANALYTICS_PORT=8204\nML_MODELS_PORT=8205\n\n# Logging\nLOG_LEVEL=INFO\n`})}),`\n`,(0,e.jsx)(n.h3,{children:\"Configuration Loading\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"Python (Pydantic Settings):\"})}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-python\",children:`class Settings(BaseSettings):\n    kafka_brokers: str = \"localhost:8207\"\n    redis_url: str = \"redis://localhost:8206\"\n    log_level: str = \"INFO\"\n    port: int = 8202\n\n    class Config:\n        env_file = \".env\"\n`})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"TypeScript:\"})}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-typescript\",children:`export const config = {\n  kafkaBrokers: process.env.KAFKA_BROKERS?.split(',') || ['localhost:8207'],\n  redisUrl: process.env.REDIS_URL || 'redis://localhost:8206',\n  port: parseInt(process.env.API_PORT || '8201'),\n};\n`})}),`\n`,(0,e.jsx)(n.h2,{children:\"Testing Strategy\"}),`\n`,(0,e.jsx)(n.h3,{children:\"Frontend Tests\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-bash\",children:`npx nx test web\n`})}),`\n`,(0,e.jsx)(n.h3,{children:\"TypeScript API Tests\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-bash\",children:`npx nx test api\n`})}),`\n`,(0,e.jsx)(n.h3,{children:\"Python Service Tests\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-bash\",children:`npx nx run trading-engine:test\n# or\ncd apps/trading-engine && poetry run pytest\n`})}),`\n`,(0,e.jsx)(n.h3,{children:\"Run All Tests\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-bash\",children:`npx nx run-many --target=test --all\n`})}),`\n`,(0,e.jsx)(n.h2,{children:\"Migration Path from Current Structure\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsxs)(n.strong,{children:[\"Move existing projects to \",(0,e.jsx)(n.code,{children:\"apps/\"})]})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"web/\"}),\" \\u2192 \",(0,e.jsx)(n.code,{children:\"apps/web/\"})]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"api/\"}),\" \\u2192 \",(0,e.jsx)(n.code,{children:\"apps/api/\"})]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"Create Python service skeletons\"})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"apps/trading-engine/\"}),\", \",(0,e.jsx)(n.code,{children:\"apps/market-data/\"}),\", etc.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"Add \",(0,e.jsx)(n.code,{children:\"pyproject.toml\"}),\" to each\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"Add \",(0,e.jsx)(n.code,{children:\"project.json\"}),\" with Nx targets\"]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"Add Docker infrastructure\"})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"Create all Dockerfiles in \",(0,e.jsx)(n.code,{children:\"docker/\"})]}),`\n`,(0,e.jsxs)(n.li,{children:[\"Create \",(0,e.jsx)(n.code,{children:\"docker-compose.yml\"}),\" and \",(0,e.jsx)(n.code,{children:\"docker-compose.prod.yml\"})]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"Setup shared libraries\"})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"libs/shared-types/\"}),\" for TypeScript\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"libs/shared-python/\"}),\" for Python utilities\"]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"Add build scripts\"})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"tools/scripts/build-all.sh\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"tools/scripts/deploy.sh\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"tools/scripts/dev.sh\"})}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"Update documentation\"})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"README.md with new architecture\"}),`\n`,(0,e.jsx)(n.li,{children:\"CLAUDE.md with development guidelines\"}),`\n`]}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.h2,{children:\"Implementation Phases\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Phase 1\"}),\": Restructure monorepo (move to \",(0,e.jsx)(n.code,{children:\"apps/\"}),\")\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Phase 2\"}),\": Add Python service skeletons\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Phase 3\"}),\": Create Dockerfiles\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Phase 4\"}),\": Setup docker-compose with Kafka\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Phase 5\"}),\": Add observability tools (Phase 1)\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Phase 6\"}),\": Update favicon and HTML\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Phase 7\"}),\": Add build scripts\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Phase 8\"}),\": Update documentation\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Phase 9\"}),\": Verify build and tests\"]}),`\n`]}),`\n`,(0,e.jsx)(n.h2,{children:\"Success Criteria\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"[ ] All services build successfully\"}),`\n`,(0,e.jsx)(n.li,{children:\"[ ] Docker Compose starts all services\"}),`\n`,(0,e.jsx)(n.li,{children:\"[ ] Frontend accessible at http://localhost:8200\"}),`\n`,(0,e.jsx)(n.li,{children:\"[ ] API Gateway responds at http://localhost:8201/health\"}),`\n`,(0,e.jsx)(n.li,{children:\"[ ] All Python services respond to health checks\"}),`\n`,(0,e.jsx)(n.li,{children:\"[ ] Kafka UI shows connected brokers\"}),`\n`,(0,e.jsx)(n.li,{children:\"[ ] All existing tests pass\"}),`\n`,(0,e.jsx)(n.li,{children:\"[ ] README and CLAUDE.md reflect new architecture\"}),`\n`]}),`\n`,(0,e.jsx)(n.h2,{children:\"Future Considerations\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"Database integration (PostgreSQL)\"}),`\n`,(0,e.jsx)(n.li,{children:\"Authentication/Authorization\"}),`\n`,(0,e.jsx)(n.li,{children:\"CI/CD pipeline (GitHub Actions)\"}),`\n`,(0,e.jsx)(n.li,{children:\"Production Kafka cluster configuration\"}),`\n`,(0,e.jsx)(n.li,{children:\"Rate limiting and circuit breakers\"}),`\n`,(0,e.jsx)(n.li,{children:\"API versioning strategy\"}),`\n`,(0,e.jsx)(n.li,{children:\"WebSocket implementation for real-time frontend updates\"}),`\n`]}),`\n`,(0,e.jsx)(n.h2,{children:\"References\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"Nx Documentation: https://nx.dev\"}),`\n`,(0,e.jsx)(n.li,{children:\"FastAPI: https://fastapi.tiangolo.com\"}),`\n`,(0,e.jsx)(n.li,{children:\"Apache Kafka: https://kafka.apache.org\"}),`\n`,(0,e.jsx)(n.li,{children:\"Docker Compose: https://docs.docker.com/compose\"}),`\n`,(0,e.jsx)(n.li,{children:\"Poetry: https://python-poetry.org\"}),`\n`]})]})}function h(r={}){let{wrapper:n}=r.components||{};return n?(0,e.jsx)(n,{...r,children:(0,e.jsx)(s,{...r})}):s(r)}return b(P);})();\n;return Component;"